<!DOCTYPE html>
<html lang="en">
  <head>
    <% include ../../partials/_head %>
    <title><%= (leagueData.name) %></title>
  </head>

  <body>
    <% include ../../partials/_nav %>

    <div class="container center_div">
      <h1>League <%= (leagueData.name) %></h1>
    </div>
    <div class="container center_div">
      <div class="col-md-6">
        <h3>Teams</h3>
        <table class="table">
          <tbody>
            <tr>
              <th>Team Name</th>
              <th>Draft Position</th>
              <th>Owner</th>
            </tr>
            <% teamData.forEach(function(team) { %>
              <tr>
                <td><%= (team.name) %></td>
                <td><%= (team.draft_position) %></td>
                <td>
                  <% if (team.user_id > 0) { %>
                    <%= team.username %>
                  <% } else { %>
                    <a class='btn btn-sm btn-primary btn-default' href="/football/league/<%= (leagueData.id) %>/claim/<%= team.id %>">Claim Team</a></p>
                  <% } %>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>

      <div class="col-md-6">
        <h3>Drafts</h3>
        <table class="table">
          <tbody>
            <tr>
              <th>Draft ID</th>
              <th>Player Pool</th>
              <th>Order</th>
              <th>Status</th>
            </tr>
            <% draftData.forEach(function(draft) { %>
              <tr>
                <td><a class='btn btn-default' href="/football/league/<%= (leagueData.id) %>/draft/<%= (draft.id) %>">Draft <%= draft.id %></a></td>
                <td><%= draft.pool %></td>
                <td><%= draft.draft_type %></td>
                <td><%= draft.status %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
        <% if (leagueData.commish_id == userID) { %>
          <div class="container center_div">
            <a class='btn btn-default' href="/football/league/<%= (leagueData.id) %>/draft/create">New Draft</a>
          </div>
        <% } %>
      </div>
    </div>
    <div class="container center_div">
      <h3>League Settings:</h3>
      <p>Name - <%= (leagueData.name) %> </p>
      <p>Size - <%= (leagueData.size) %></p>
      <p>Scoring - <%= (leagueData.scoring) %></p>
      <p>Type - <%= (leagueData.type) %></p>
      <% if ((leagueData.type) === 'Keeper') { %>
        <p>Keepers - <%= (leagueData.keepers) %></p>
      <% } %>
      <% if (leagueData.commish_id === userID) { %>
        <div class="container center_div">
          <a class='btn btn-default' href="/football/league/<%= (leagueData.id) %>/edit">Edit League</a>
        </div>
      <% } %>
    </div>

    <div class="container center_div">
      <h3>Roster Positions:</h3>
      <% for (var key in leaguePositions) { %>
        <p> <%= key.replace(/_/g, '/') %> - <%= leaguePositions[key] %> </p>
      <% } %>
    </div>

  </body>
</html>
